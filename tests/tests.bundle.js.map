{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap da0e353d4e28d85ccebc","webpack:///./tests/dom-tests.js","webpack:///./src/utils/index.js","webpack:///./src/utils/utils.spec.dom.js","webpack:///./tests/fixtures/truncate-dom.html","webpack:///./src .*spec.dom.js$"],"names":["testsContext","keys","forEach","parseTextAndBuildHashtags","truncateDOM","text","parsedText","replace","parent","child","readMoreText","clientHeight","innerHTML","length","cur","match","describe","it","done","document","window","main","getElementById","querySelector","should","textContent","be","eql"],"mappings":"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","file":"tests.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tests\"] = factory();\n\telse\n\t\troot[\"tests\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap da0e353d4e28d85ccebc","var testsContext = require.context('../src/', true, /.*spec.dom.js$/);\ntestsContext.keys().forEach(testsContext);\n\n\n// WEBPACK FOOTER //\n// ./tests/dom-tests.js","/**\n * Basic hashtag and mentions builder from text\n * @param {String} text original text to parse\n * @return {String} parsedText parsed text with links\n */\nexport function parseTextAndBuildHashtags(text) {\n\n  if (!text) {\n    return ''\n  }\n\n  let parsedText\n\n  // replace hashtags and mentions\n  parsedText = text\n    .replace(/#(\\w+)/g, '<a href=\"https://twitter.com/hashtag/$1?src=hash\" target=\"_blank\">#$1</a>')\n    .replace(/@(\\w+)/g, '<a href=\"https://twitter.com/$1\" target=\"_blank\">@$1</a>')\n\n  return parsedText\n\n}\n\n/**\n * Truncate DOM element to parent's height, word by word\n * @param {Element} parent parent DOM element\n * @param {Element} child child DOM element\n * @param {String} readMoreText \"read more..\" text to account for\n */\nexport function truncateDOM(parent, child, readMoreText) {\n\n  // until the height of the paragraph isn't larger than the height of the container\n  while (child.clientHeight > parent.clientHeight) {\n    // remove words from the back, word by word\n    let text = child.innerHTML\n    text = text.replace(/\\W*\\s(\\S)*$/, '')\n    child.innerHTML = text\n  }\n\n  if (!readMoreText) {\n    return\n  }\n\n  const length = readMoreText.length\n  let cur = 0\n\n  // let's remove more words, until we get to a point where we can fit '   ...read more'\n  while (cur < length) {\n    let text = child.innerHTML\n    const match = text.match(/\\W*\\s(\\S)*$/)\n    cur += match[0].length\n    text = text.replace(/\\W*\\s(\\S)*$/, '')\n    child.innerHTML = text\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","import { truncateDOM } from './index'\nimport truncateDOMFixture from '../../tests/fixtures/truncate-dom.html'\n\ndescribe('dom-utils: ', () => {\n\n  it('truncates a paragraph until it does not exceed parent\\'s height', (done) => {\n\n    const document = window.document\n    const main = document.getElementById('mocha')\n    main.innerHTML = truncateDOMFixture\n    const parent = window.document.querySelector('#parent')\n    const child = window.document.querySelector('#child')\n\n    truncateDOM(parent, child)\n\n    // the result string was determined by opening index.html in Chrome\n    should(child.textContent).be.eql('It is a long established fact that a reader will be distracted by the readable content of a page when')\n\n    done()\n\n  })\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.spec.dom.js","module.exports = \"<style>\\np {\\n  margin: 0;\\n  padding: 0;\\n}\\n</style>\\n\\n<div style=\\\"height: 3em; width: 250px; overflow: hidden;\\\" id=\\\"parent\\\">\\n  <p id=\\\"child\\\" style=\\\"line-height: 1em\\\">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./tests/fixtures/truncate-dom.html\n// module id = 3\n// module chunks = 0","var map = {\n\t\"./utils/utils.spec.dom.js\": 2\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src .*spec.dom.js$\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}